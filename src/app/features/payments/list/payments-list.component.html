<div class="min-h-screen bg-gray-50 px-8 py-6">
  <!-- Header -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
    <div>
      <h1 class="text-2xl font-semibold text-gray-900">Payments Management</h1>
      <p class="text-sm text-gray-500 mt-1">Monitor and manage all system-wide financial inflows</p>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mb-8">
    <!-- Success Rate -->
    <div class="bg-white rounded-xl border border-gray-200 px-6 py-5 hover:border-gray-300 transition group">
      <div class="flex items-start justify-between">
        <div>
          <p class="text-[11px] font-semibold text-gray-500 uppercase tracking-wider">Success Rate</p>
          <h3 class="mt-2 text-4xl font-semibold text-gray-900">{{ stats().successRate }}%</h3>
          <p class="mt-1 text-xs text-green-600 font-medium flex items-center gap-1">
            <i class="pi pi-arrow-up text-[10px]"></i>
            Highly stable throughput
          </p>
        </div>
        <i class="pi pi-verified text-gray-300 text-lg transition-colors group-hover:text-green-400"></i>
      </div>
    </div>

    <!-- Pending Action -->
    <div class="bg-white rounded-xl border border-gray-200 px-6 py-5 hover:border-gray-300 transition group">
      <div class="flex items-start justify-between">
        <div>
          <p class="text-[11px] font-semibold text-gray-500 uppercase tracking-wider">Pending Confirmation</p>
          <h3 class="mt-2 text-4xl font-semibold text-gray-900">{{ stats().totalPending }}</h3>
          <p class="mt-1 text-xs text-orange-600 font-medium">Requires manual verification</p>
        </div>
        <i class="pi pi-clock text-gray-300 text-lg transition-colors group-hover:text-orange-400"></i>
      </div>
    </div>

    <!-- Total Volume -->
    <div class="bg-white rounded-xl border border-gray-200 px-6 py-5 hover:border-gray-300 transition group">
      <div class="flex items-start justify-between">
        <div>
          <p class="text-[11px] font-semibold text-gray-500 uppercase tracking-wider">Total Volume</p>
          <h3 class="mt-2 text-4xl font-semibold text-gray-900">{{ stats().totalVolume | currency:'USD':'symbol':'1.0-0' }}</h3>
          <p class="mt-1 text-xs text-gray-500">Trailing all-time volume</p>
        </div>
        <i class="pi pi-chart-line text-gray-300 text-lg transition-colors group-hover:text-blue-400"></i>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="bg-white border border-gray-200 rounded-xl px-5 py-4 mb-6">
    <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
      <div class="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
        <!-- Status Filter -->
        <select
          [ngModel]="selectedStatus()"
          (ngModelChange)="selectedStatus.set($event)"
          class="h-10 px-4 rounded-lg border border-gray-300 text-sm text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-gray-900/10 transition-shadow">
          @for (option of statusOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>

        <!-- Method Filter -->
        <select
          [ngModel]="selectedMethod()"
          (ngModelChange)="selectedMethod.set($event)"
          class="h-10 px-4 rounded-lg border border-gray-300 text-sm text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-gray-900/10 transition-shadow">
          @for (option of methodOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>

        <!-- Search -->
        <div class="relative flex-1 sm:w-72">
          <i class="pi pi-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
          <input
            type="text"
            [value]="searchQuery()"
            (input)="onSearch($event)"
            placeholder="Search by ID or user..."
            class="h-10 w-full pl-9 pr-4 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900/10 transition-shadow"
          />
        </div>
      </div>

      <button
        (click)="onExport()"
        class="h-10 px-4 rounded-lg border border-gray-300 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
        <i class="pi pi-download text-sm"></i>
        Export
      </button>
    </div>
  </div>

  <!-- Table Section -->
  <app-data-table
    [data]="filteredPayments()"
    [columns]="columns()"
    [config]="tableConfig()"
    [actions]="actions()">
    
    <!-- Custom Purpose Template -->
    <ng-template appDataTableTemplate="purpose" let-row>
      <span 
        class="px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider border"
        [class]="getPurposeClass(row.purpose)">
        {{ row.purpose }}
      </span>
    </ng-template>

    <!-- Custom Status Template -->
    <ng-template appDataTableTemplate="status" let-row>
      <app-status-badge [status]="row.status"></app-status-badge>
    </ng-template>
  </app-data-table>

  <!-- Empty State -->
  @if (filteredPayments().length === 0) {
    <div class="bg-white rounded-xl border border-gray-200 p-16 text-center mt-2">
      <div class="w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-100">
        <i class="pi pi-credit-card text-gray-300 text-3xl"></i>
      </div>
      <h3 class="text-gray-900 font-semibold text-lg">No payments found</h3>
      <p class="text-gray-500 text-sm mt-1 max-w-sm mx-auto">
        Your search or filters didn't return any results. Try broadening your criteria.
      </p>
    </div>
  }
</div>
