    <p-toast></p-toast>
    <div class=" mx-auto space-y-8">
      
      <!-- List of Bonus Cards -->
      @for (bonus of bonuses(); track bonus.id) {
        <div class="bg-white rounded-2xl border border-gray-100 p-8 shadow-sm hover:shadow-md transition-shadow">
          <div class="flex flex-col md:flex-row md:items-start justify-between gap-6">
            
            <!-- Bonus Info -->
            <div class="flex-1 space-y-2">
              <div class="flex items-center gap-3">
                <h3 class="text-lg font-bold text-gray-900">{{ bonus.name }}</h3>
                <p-tag [value]="bonus.type | titlecase" [severity]="bonus.type === 'percentage' ? 'info' : 'success'"></p-tag>
              </div>
              <p class="text-gray-500 text-sm leading-relaxed max-w-2xl">{{ bonus.description }}</p>
              
              <!-- Applicable Packages -->
              <div class="flex flex-wrap gap-2 mt-4">
                @for (pkg of bonus.applicablePackages; track pkg) {
                  <span class="px-2.5 py-1 rounded bg-gray-50 border border-gray-100 text-xs font-semibold text-gray-600">
                    {{ pkg }}
                  </span>
                }
              </div>
            </div>

            <!-- Edit/Value Section -->
            <div class="flex items-center gap-4 bg-gray-50/50 p-4 rounded-xl border border-gray-100 md:min-w-[280px] justify-between">
               <div class="space-y-1">
                 <label class="text-xs font-bold text-gray-400 uppercase tracking-wider">Current Value</label>
                 
                 <!-- Read Mode -->
                 @if (!isEditing(bonus.id)) {
                   <div class="text-2xl font-black text-gray-900">
                     {{ bonus.type === 'percentage' ? (bonus.value + '%') : (bonus.value | currency) }}
                   </div>
                 } 
                 
                 <!-- Edit Mode -->
                 @else {
                    <p-inputNumber 
                      [formControl]="getEditControl(bonus.id)" 
                      [suffix]="bonus.type === 'percentage' ? '%' : ''" 
                      [prefix]="bonus.type === 'flat' ? '$' : ''"
                      mode="decimal" 
                      [minFractionDigits]="0" 
                      [maxFractionDigits]="2"
                      styleClass="w-32 p-inputtext-sm">
                    </p-inputNumber>
                 }
               </div>

               <!-- Actions -->
               <div>
                 @if (!isEditing(bonus.id)) {
                   <button 
                    pButton 
                    icon="pi pi-pencil" 
                    class="p-button-rounded p-button-text p-button-secondary"
                    (click)="startEdit(bonus)">
                   </button>
                 } @else {
                   <div class="flex gap-2">
                     <button 
                      pButton 
                      icon="pi pi-check" 
                      class="p-button-rounded p-button-success p-button-sm shadow-sm"
                      (click)="saveEdit(bonus)">
                     </button>
                     <button 
                      pButton 
                      icon="pi pi-times" 
                      class="p-button-rounded p-button-secondary p-button-text p-button-sm"
                      (click)="cancelEdit(bonus.id)">
                     </button>
                   </div>
                 }
               </div>
            </div>

          </div>
        </div>
      }

    </div>
