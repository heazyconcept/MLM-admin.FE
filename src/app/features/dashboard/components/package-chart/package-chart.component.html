<div class="bg-white rounded-xl p-5 border border-gray-100 shadow-sm h-full">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-mlm-text">Package Distribution</h3>
    <button class="p-1 rounded hover:bg-gray-100 text-mlm-secondary transition-colors">
      <i class="pi pi-ellipsis-h"></i>
    </button>
  </div>

  <div class="flex flex-col sm:flex-row items-center gap-6">
    <!-- Chart Container -->
    <div class="relative shrink-0" style="width: 180px; height: 180px;">
      <p-chart type="doughnut" [data]="data" [options]="options" styleClass="w-full h-full"></p-chart>
      <!-- Center Text -->
      <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
        <span class="text-2xl font-bold text-mlm-text">{{ totalUsers | number }}</span>
        <span class="text-xs text-mlm-secondary">Total Users</span>
      </div>
    </div>

    <!-- Legend -->
    <div class="flex-1 w-full space-y-3">
      @for (pkg of packageList(); track pkg.name) {
        <div class="flex items-center justify-between py-1 px-2 rounded-lg hover:bg-mlm-background transition-colors">
          <div class="flex items-center gap-2">
            <span 
              class="w-3 h-3 rounded-full shrink-0"
              [style.background-color]="pkg.color">
            </span>
            <span class="text-sm font-medium text-mlm-text">{{ pkg.name }}</span>
          </div>
          <div class="text-right">
            <span class="text-sm font-semibold text-mlm-text">{{ pkg.count | number }}</span>
            <span class="text-xs text-mlm-secondary ml-1">({{ pkg.percentage }}%)</span>
          </div>
        </div>
      }
    </div>
  </div>
</div>

